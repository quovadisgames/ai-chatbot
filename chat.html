<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDT AI - Chat Interface</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;700&family=Inter:wght@300;400;500;600;700&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Main stylesheet -->
    <link rel="stylesheet" href="styles.css">
    <!-- Theme stylesheets -->
    <link rel="stylesheet" href="themes/kotor.css">
    <link rel="stylesheet" href="themes/jedi.css">
    <link rel="stylesheet" href="themes/professional.css">
    <!-- Page-specific styles -->
    <link rel="stylesheet" href="styles/chat-page.css">
    <style>
        /* Fix for vertical scrolling */
        html, body {
            overflow-x: hidden;
        }
        
        .main-container {
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            overflow-y: auto;
        }
        
        .neural-grid, 
        #neural-nodes, 
        .particles, 
        .waves-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
    </style>
</head>
<body class="jedi-theme">
    <div class="main-container">
        <div class="neural-grid"></div>
        <div id="neural-nodes"></div>
        <div class="particles" id="particles"></div>
        <div class="waves-container" id="waves-container"></div>
        
        <a href="index.html" class="back-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
            Back to Home
        </a>
        
        <a href="participants.html" class="personas-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
            View Personas
        </a>
        
        <div class="theme-switcher">
            <button class="theme-switcher-button">
                <span class="current-theme">Jedi: Survivor</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
            </button>
            <div class="theme-switcher-dropdown">
                <div class="theme-option" data-theme="kotor">KOTOR</div>
                <div class="theme-option" data-theme="jedi">Jedi: Survivor</div>
                <div class="theme-option" data-theme="professional">Professional</div>
            </div>
        </div>
        
        <div class="chat-layout">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-title">Chat History</div>
                    <button class="sidebar-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m19 12-7-7-7 7"></path><path d="m19 12-7 7-7-7"></path></svg>
                    </button>
                </div>
                <div class="sidebar-search">
                    <input type="text" class="search-input" placeholder="Search chats...">
                </div>
                <div class="chat-list">
                    <div class="chat-item active">
                        <div class="chat-item-title">Mission: Query #1</div>
                        <div class="chat-item-preview">Neural network optimization parameters...</div>
                    </div>
                    <div class="chat-item">
                        <div class="chat-item-title">Mission: Data Analysis</div>
                        <div class="chat-item-preview">Analyzing the latest dataset from...</div>
                    </div>
                    <div class="chat-item">
                        <div class="chat-item-title">Mission: Code Review</div>
                        <div class="chat-item-preview">Reviewing the implementation of...</div>
                    </div>
                </div>
            </div>
            
            <!-- Main Chat Area -->
            <div class="chat-main">
                <div class="chat-header">
                    <div class="chat-title">Mission: Query #1</div>
                    <div class="participants">
                        <div class="participant-avatars">
                            <div class="participant-avatar">U</div>
                            <div class="participant-avatar">Z</div>
                        </div>
                        <a href="participants.html" class="add-participant-btn">Add Participant</a>
                    </div>
                </div>
                
                <!-- Chat Content Area -->
                <div class="chat-content">
                    <div class="chat-messages">
                        <!-- System Message -->
                        <div class="message system-message">
                            <div class="message-content">
                                <div class="message-text">
                                    <p>Mission initialized. PDT AI is ready to assist with your query.</p>
                                </div>
                                <div class="message-time">Today at 09:15</div>
                            </div>
                        </div>
                        
                        <!-- User Message -->
                        <div class="message user-message">
                            <div class="message-avatar">U</div>
                            <div class="message-content">
                                <div class="message-sender">User</div>
                                <div class="message-text">
                                    <p>I need to optimize the neural network parameters for our latest model. The current configuration is using too much memory and the training time is excessive. Can you suggest some optimizations?</p>
                                </div>
                                <div class="message-time">Today at 09:16</div>
                            </div>
                        </div>
                        
                        <!-- AI Message -->
                        <div class="message ai-message">
                            <div class="message-avatar">Z</div>
                            <div class="message-content">
                                <div class="message-sender">Zeta-7 <span class="ai-badge">AI</span></div>
                                <div class="message-text">
                                    <p>Based on your description, there are several optimization strategies we can implement:</p>
                                    <ol>
                                        <li>
                                            <strong>Reduce batch size</strong>: This will decrease memory usage but may increase training time. Finding the optimal batch size is crucial.
                                        </li>
                                        <li>
                                            <strong>Mixed precision training</strong>: Using FP16 instead of FP32 can significantly reduce memory usage and speed up training on compatible hardware.
                                        </li>
                                        <li>
                                            <strong>Model pruning</strong>: Remove unnecessary connections in your neural network without significant accuracy loss.
                                        </li>
                                        <li>
                                            <strong>Knowledge distillation</strong>: Train a smaller "student" model to mimic a larger "teacher" model.
                                        </li>
                                    </ol>
                                    <p>Would you like me to elaborate on any of these approaches?</p>
                                </div>
                                <div class="message-time">Today at 09:17</div>
                                <div class="message-actions">
                                    <button class="action-button copy-button" title="Copy to clipboard">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                    </button>
                                    <button class="action-button regenerate-button" title="Regenerate response">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- User Message -->
                        <div class="message user-message">
                            <div class="message-avatar">U</div>
                            <div class="message-content">
                                <div class="message-sender">User</div>
                                <div class="message-text">
                                    <p>I'd like to know more about mixed precision training. How much memory savings can we expect, and are there any drawbacks?</p>
                                </div>
                                <div class="message-time">Today at 09:19</div>
                            </div>
                        </div>
                        
                        <!-- AI Message with Code -->
                        <div class="message ai-message">
                            <div class="message-avatar">Z</div>
                            <div class="message-content">
                                <div class="message-sender">Zeta-7 <span class="ai-badge">AI</span></div>
                                <div class="message-text">
                                    <p>Mixed precision training can reduce memory usage by up to 50% while potentially increasing training speed by 2-3x on hardware with tensor cores (like NVIDIA's Volta, Turing, and Ampere architectures).</p>
                                    
                                    <p><strong>Benefits:</strong></p>
                                    <ul>
                                        <li>Reduced memory usage (almost half)</li>
                                        <li>Faster computation and training times</li>
                                        <li>Allows for larger batch sizes or model sizes</li>
                                    </ul>
                                    
                                    <p><strong>Drawbacks:</strong></p>
                                    <ul>
                                        <li>Potential for numerical instability (mitigated with loss scaling)</li>
                                        <li>Not all operations support FP16</li>
                                        <li>Requires compatible hardware for speed benefits</li>
                                    </ul>
                                    
                                    <p>Here's a simple implementation example using PyTorch's automatic mixed precision:</p>
                                    
                                    <pre><code class="language-python"># Import the necessary libraries
from torch.cuda.amp import autocast, GradScaler

# Initialize the model, optimizer, data loader
model = YourModel().cuda()
optimizer = torch.optim.Adam(model.parameters(), lr=1e-3)
train_loader = DataLoader(dataset, batch_size=32)

# Initialize the gradient scaler
scaler = GradScaler()

# Training loop
for epoch in range(num_epochs):
    for inputs, targets in train_loader:
        inputs, targets = inputs.cuda(), targets.cuda()
        
        # Forward pass with autocast
        with autocast():
            outputs = model(inputs)
            loss = loss_fn(outputs, targets)
        
        # Backward pass with gradient scaling
        optimizer.zero_grad()
        scaler.scale(loss).backward()
        scaler.step(optimizer)
        scaler.update()</code></pre>
                                    
                                    <p>This implementation automatically handles the conversion between FP32 and FP16 where appropriate, and the gradient scaler helps prevent underflow in the gradients.</p>
                                </div>
                                <div class="message-time">Today at 09:21</div>
                                <div class="message-actions">
                                    <button class="action-button copy-button" title="Copy to clipboard">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                    </button>
                                    <button class="action-button regenerate-button" title="Regenerate response">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Chat Input Area -->
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <textarea class="chat-input" placeholder="Type your message here..." rows="1"></textarea>
                        <div class="input-actions">
                            <button class="action-button attach-button" title="Attach file">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                            </button>
                            <button class="send-button" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                                Send
                            </button>
                        </div>
                    </div>
                    <div class="chat-input-info">
                        <span class="info-text">PDT AI may produce inaccurate information about people, places, or facts.</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Theme Switcher Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const themeSwitcher = document.querySelector('.theme-switcher');
            const themeSwitcherButton = document.querySelector('.theme-switcher-button');
            const themeOptions = document.querySelectorAll('.theme-option');
            const currentThemeSpan = document.querySelector('.current-theme');
            
            // Toggle theme dropdown
            themeSwitcherButton.addEventListener('click', function() {
                themeSwitcher.classList.toggle('active');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!themeSwitcher.contains(event.target)) {
                    themeSwitcher.classList.remove('active');
                }
            });
            
            // Theme selection
            themeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    document.body.className = theme + '-theme';
                    
                    // Update current theme text
                    if (theme === 'kotor') {
                        currentThemeSpan.textContent = 'KOTOR';
                    } else if (theme === 'jedi') {
                        currentThemeSpan.textContent = 'Jedi: Survivor';
                    } else if (theme === 'professional') {
                        currentThemeSpan.textContent = 'Professional';
                    }
                    
                    // Save theme preference
                    localStorage.setItem('pdtAiTheme', theme);
                    
                    // Close dropdown
                    themeSwitcher.classList.remove('active');
                });
            });
            
            // Load saved theme
            const savedTheme = localStorage.getItem('pdtAiTheme');
            if (savedTheme) {
                document.body.className = savedTheme + '-theme';
                
                // Update current theme text
                if (savedTheme === 'kotor') {
                    currentThemeSpan.textContent = 'KOTOR';
                } else if (savedTheme === 'jedi') {
                    currentThemeSpan.textContent = 'Jedi: Survivor';
                } else if (savedTheme === 'professional') {
                    currentThemeSpan.textContent = 'Professional';
                }
            }
        });

        // Chat Input Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const chatInput = document.querySelector('.chat-input');
            const sendButton = document.querySelector('.send-button');
            const chatMessages = document.querySelector('.chat-messages');
            const chatContent = document.querySelector('.chat-content');
            
            // Auto-resize textarea
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
                
                // Enable/disable send button based on input
                if (this.value.trim().length > 0) {
                    sendButton.removeAttribute('disabled');
                } else {
                    sendButton.setAttribute('disabled', true);
                }
            });
            
            // Send message on button click
            sendButton.addEventListener('click', function() {
                sendMessage();
            });
            
            // Send message on Enter key (but allow Shift+Enter for new line)
            chatInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    if (!sendButton.hasAttribute('disabled')) {
                        sendMessage();
                    }
                }
            });
            
            // Function to send a message
            function sendMessage() {
                const messageText = chatInput.value.trim();
                if (messageText.length === 0) return;
                
                // Create user message element
                const userMessage = createUserMessage(messageText);
                chatMessages.appendChild(userMessage);
                
                // Clear input and reset height
                chatInput.value = '';
                chatInput.style.height = 'auto';
                sendButton.setAttribute('disabled', true);
                
                // Scroll to bottom
                scrollToBottom();
                
                // Show typing indicator
                showTypingIndicator();
                
                // Simulate AI response after a delay
                setTimeout(() => {
                    // Remove typing indicator
                    removeTypingIndicator();
                    
                    // Create AI response
                    const aiResponse = createAIResponse(messageText);
                    chatMessages.appendChild(aiResponse);
                    
                    // Scroll to bottom again
                    scrollToBottom();
                    
                    // Add event listeners to new message actions
                    setupMessageActions();
                }, 1500 + Math.random() * 1000);
            }
            
            // Create a user message element
            function createUserMessage(text) {
                const now = new Date();
                const timeString = `Today at ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message user-message';
                messageDiv.innerHTML = `
                    <div class="message-avatar">U</div>
                    <div class="message-content">
                        <div class="message-sender">User</div>
                        <div class="message-text">
                            <p>${text.replace(/\n/g, '<br>')}</p>
                        </div>
                        <div class="message-time">${timeString}</div>
                    </div>
                `;
                
                return messageDiv;
            }
            
            // Create an AI response element
            function createAIResponse(userMessage) {
                const now = new Date();
                const timeString = `Today at ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                
                // Generate a response based on user message
                let responseText = generateAIResponse(userMessage);
                
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message ai-message';
                messageDiv.innerHTML = `
                    <div class="message-avatar">Z</div>
                    <div class="message-content">
                        <div class="message-sender">Zeta-7 <span class="ai-badge">AI</span></div>
                        <div class="message-text">
                            ${responseText}
                        </div>
                        <div class="message-time">${timeString}</div>
                        <div class="message-actions">
                            <button class="action-button copy-button" title="Copy to clipboard">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                            </button>
                            <button class="action-button regenerate-button" title="Regenerate response">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path></svg>
                            </button>
                        </div>
                    </div>
                `;
                
                return messageDiv;
            }
            
            // Generate a simple AI response based on user input
            function generateAIResponse(userMessage) {
                userMessage = userMessage.toLowerCase();
                
                if (userMessage.includes('hello') || userMessage.includes('hi') || userMessage.includes('hey')) {
                    return '<p>Hello! How can I assist you with your mission today?</p>';
                } else if (userMessage.includes('thank')) {
                    return '<p>You\'re welcome! Is there anything else you need assistance with?</p>';
                } else if (userMessage.includes('help')) {
                    return '<p>I\'m here to help! Could you please provide more details about what you need assistance with?</p>';
                } else if (userMessage.includes('neural') || userMessage.includes('network') || userMessage.includes('ai') || userMessage.includes('model')) {
                    return `
                        <p>Regarding your query about neural networks, here are some key points to consider:</p>
                        <ul>
                            <li>Modern neural architectures like transformers have shown remarkable capabilities in various domains</li>
                            <li>Optimization techniques such as gradient accumulation and mixed precision training can significantly improve performance</li>
                            <li>Data quality often matters more than model size for many practical applications</li>
                        </ul>
                        <p>Would you like me to elaborate on any specific aspect of neural network technology?</p>
                    `;
                } else if (userMessage.includes('code') || userMessage.includes('program') || userMessage.includes('script')) {
                    return `
                        <p>Here's a simple example that might help:</p>
                        <pre><code class="language-python">import tensorflow as tf

# Create a simple neural network
model = tf.keras.Sequential([
    tf.keras.layers.Dense(128, activation='relu', input_shape=(784,)),
    tf.keras.layers.Dropout(0.2),
    tf.keras.layers.Dense(10, activation='softmax')
])

# Compile the model
model.compile(
    optimizer='adam',
    loss='sparse_categorical_crossentropy',
    metrics=['accuracy']
)

# Train the model
model.fit(x_train, y_train, epochs=5)
</code></pre>
                        <p>This creates a basic neural network with one hidden layer. You can customize it based on your specific requirements.</p>
                    `;
                } else {
                    return `
                        <p>I've analyzed your request and here are my thoughts:</p>
                        <p>The approach you're describing could work, but there are some important considerations to keep in mind. The efficiency of the solution depends on several factors including the scale of data, processing requirements, and specific constraints of your environment.</p>
                        <p>Would you like me to provide a more detailed analysis or suggest some alternative approaches?</p>
                    `;
                }
            }
            
            // Show typing indicator
            function showTypingIndicator() {
                const typingIndicator = document.createElement('div');
                typingIndicator.className = 'message ai-message typing-indicator';
                typingIndicator.innerHTML = `
                    <div class="message-avatar">Z</div>
                    <div class="message-content">
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                `;
                
                chatMessages.appendChild(typingIndicator);
                scrollToBottom();
            }
            
            // Remove typing indicator
            function removeTypingIndicator() {
                const typingIndicator = document.querySelector('.typing-indicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
            }
            
            // Scroll chat to bottom
            function scrollToBottom() {
                chatContent.scrollTop = chatContent.scrollHeight;
            }
            
            // Setup message action buttons
            function setupMessageActions() {
                // Copy buttons
                document.querySelectorAll('.copy-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const messageText = this.closest('.message-content').querySelector('.message-text').innerText;
                        navigator.clipboard.writeText(messageText).then(() => {
                            // Show copied feedback
                            const originalTitle = this.getAttribute('title');
                            this.setAttribute('title', 'Copied!');
                            this.classList.add('copied');
                            
                            setTimeout(() => {
                                this.setAttribute('title', originalTitle);
                                this.classList.remove('copied');
                            }, 2000);
                        });
                    });
                });
                
                // Regenerate buttons
                document.querySelectorAll('.regenerate-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const messageContent = this.closest('.message-content');
                        const messageText = messageContent.querySelector('.message-text');
                        
                        // Show regenerating state
                        const originalHTML = messageText.innerHTML;
                        messageText.innerHTML = '<p>Regenerating response...</p>';
                        
                        // Simulate regeneration after a delay
                        setTimeout(() => {
                            const newResponse = generateAIResponse(
                                document.querySelector('.user-message:last-of-type .message-text').innerText
                            );
                            messageText.innerHTML = newResponse;
                        }, 1000);
                    });
                });
            }
            
            // Initial setup of message actions
            setupMessageActions();
            
            // Sidebar toggle functionality
            const sidebarToggle = document.querySelector('.sidebar-toggle');
            const sidebar = document.querySelector('.sidebar');
            
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
                
                // Update toggle icon
                const toggleIcon = this.querySelector('svg');
                if (sidebar.classList.contains('collapsed')) {
                    toggleIcon.innerHTML = '<path d="m9 18 6-6-6-6"></path>';
                } else {
                    toggleIcon.innerHTML = '<path d="m19 12-7-7-7 7"></path><path d="m19 12-7 7-7-7"></path>';
                }
            });
            
            // Chat list item selection
            const chatItems = document.querySelectorAll('.chat-item');
            
            chatItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove active class from all items
                    chatItems.forEach(i => i.classList.remove('active'));
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Update chat title
                    const chatTitle = document.querySelector('.chat-title');
                    chatTitle.textContent = this.querySelector('.chat-item-title').textContent;
                    
                    // In a real app, this would load the selected chat history
                    // For this demo, we'll just clear the chat and add a system message
                    chatMessages.innerHTML = `
                        <div class="message system-message">
                            <div class="message-content">
                                <div class="message-text">
                                    <p>Switched to ${this.querySelector('.chat-item-title').textContent}</p>
                                </div>
                                <div class="message-time">Today at ${new Date().getHours().toString().padStart(2, '0')}:${new Date().getMinutes().toString().padStart(2, '0')}</div>
                            </div>
                        </div>
                    `;
                });
            });
        });

        // Background Effects
        document.addEventListener('DOMContentLoaded', function() {
            // Neural Network Grid Nodes and Connections
            createNeuralNetwork();
            
            // Particles
            createParticles();
            
            // Waves
            createWaves();
            
            // Window resize handler
            window.addEventListener('resize', function() {
                // Clear existing elements
                document.getElementById('neural-nodes').innerHTML = '';
                document.getElementById('particles').innerHTML = '';
                
                // Recreate elements
                createNeuralNetwork();
                createParticles();
            });
            
            // Create neural network nodes and connections
            function createNeuralNetwork() {
                const nodesContainer = document.getElementById('neural-nodes');
                const width = window.innerWidth;
                const height = window.innerHeight;
                
                // Create nodes
                const nodes = [];
                const nodeCount = Math.floor(width * height / 25000); // Adjust density based on screen size
                
                for (let i = 0; i < nodeCount; i++) {
                    const node = document.createElement('div');
                    node.className = 'neural-node';
                    
                    // Random position
                    const x = Math.random() * width;
                    const y = Math.random() * height;
                    
                    node.style.left = `${x}px`;
                    node.style.top = `${y}px`;
                    
                    // Pulse animation with random delay
                    node.style.animation = `pulse 3s infinite ${Math.random() * 3}s`;
                    
                    nodesContainer.appendChild(node);
                    nodes.push({ element: node, x, y });
                }
                
                // Create connections between nearby nodes
                nodes.forEach((node, i) => {
                    // Connect to a few nearby nodes
                    for (let j = 0; j < nodes.length; j++) {
                        if (i !== j) {
                            const otherNode = nodes[j];
                            const dx = otherNode.x - node.x;
                            const dy = otherNode.y - node.y;
                            const distance = Math.sqrt(dx * dx + dy * dy);
                            
                            // Only connect if within a certain distance
                            if (distance < 150) {
                                const connection = document.createElement('div');
                                connection.className = 'neural-connection';
                                
                                // Position and rotate the connection
                                connection.style.left = `${node.x}px`;
                                connection.style.top = `${node.y}px`;
                                connection.style.width = `${distance}px`;
                                connection.style.transform = `rotate(${Math.atan2(dy, dx)}rad)`;
                                
                                // Fade based on distance
                                connection.style.opacity = 0.5 - distance / 300;
                                
                                nodesContainer.appendChild(connection);
                            }
                        }
                    }
                });
            }
            
            // Create floating particles
            function createParticles() {
                const particlesContainer = document.getElementById('particles');
                const width = window.innerWidth;
                const height = window.innerHeight;
                
                // Create particles
                const particleCount = Math.floor(width * height / 10000);
                
                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    
                    // Random position
                    const x = Math.random() * width;
                    const y = Math.random() * height;
                    
                    particle.style.left = `${x}px`;
                    particle.style.top = `${y}px`;
                    
                    // Random drift direction and duration
                    const xDrift = (Math.random() - 0.5) * 200;
                    const yDrift = (Math.random() - 0.5) * 200;
                    const driftDuration = 3 + Math.random() * 7;
                    
                    particle.style.setProperty('--x-drift', `${xDrift}px`);
                    particle.style.setProperty('--y-drift', `${yDrift}px`);
                    particle.style.setProperty('--drift-duration', `${driftDuration}s`);
                    
                    // Random size
                    const size = 1 + Math.random() * 2;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    
                    // Random opacity
                    particle.style.opacity = 0.1 + Math.random() * 0.2;
                    
                    particlesContainer.appendChild(particle);
                }
            }
            
            // Create wave elements
            function createWaves() {
                const wavesContainer = document.getElementById('waves-container');
                
                // Create three wave elements
                for (let i = 1; i <= 3; i++) {
                    const wave = document.createElement('div');
                    wave.className = `wave wave-${i}`;
                    wavesContainer.appendChild(wave);
                }
            }
        });
    </script>
</body>
</html> 