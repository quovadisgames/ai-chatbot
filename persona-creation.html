<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDT AI - Persona Creation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;700&family=Inter:wght@300;400;500;600;700&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Main stylesheet -->
    <link rel="stylesheet" href="styles.css">
    <!-- Theme stylesheets -->
    <link rel="stylesheet" href="themes/kotor.css">
    <link rel="stylesheet" href="themes/jedi.css">
    <link rel="stylesheet" href="themes/professional.css">
    <!-- Page-specific styles -->
    <link rel="stylesheet" href="styles/persona-creation.css">
    <style>
        /* Fix for vertical scrolling */
        html, body {
            overflow-x: hidden;
        }
        
        .main-container {
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            overflow-y: auto;
        }
        
        .neural-grid, 
        #neural-nodes, 
        .particles, 
        .waves-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
    </style>
</head>
<body class="jedi-theme">
    <div class="main-container">
        <div class="neural-grid"></div>
        <div id="neural-nodes"></div>
        <div class="particles" id="particles"></div>
        <div class="waves-container" id="waves-container"></div>
        
        <a href="main-menu.html" class="back-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
            Back to Menu
        </a>
        
        <div class="theme-switcher">
            <button class="theme-switcher-button">
                <span class="current-theme">Jedi: Survivor</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
            </button>
            <div class="theme-switcher-dropdown">
                <div class="theme-option" data-theme="kotor">KOTOR</div>
                <div class="theme-option" data-theme="jedi">Jedi: Survivor</div>
                <div class="theme-option" data-theme="professional">Professional</div>
            </div>
        </div>
        
        <div class="persona-container">
            <div class="persona-header">
                <h1 class="persona-title">Create Your AI Persona</h1>
                <p class="persona-subtitle">Design a custom AI assistant tailored to your specific needs and preferences. Complete the following steps to bring your AI persona to life.</p>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-track">
                        <div class="progress-fill" style="width: 50%;"></div>
                    </div>
                    <div class="progress-steps">
                        <div class="progress-step active" data-step="1">
                            <div class="step-number">1</div>
                            <div class="step-label">Basic Information</div>
                        </div>
                        <div class="progress-step" data-step="2">
                            <div class="step-number">2</div>
                            <div class="step-label">Personality & Skills</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="persona-form">
                <div class="form-step active" id="step-1">
                    <div class="form-section">
                        <h2 class="section-title">
                            <span class="icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>
                            </span>
                            Basic Information
                        </h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="persona-name">Persona Name</label>
                                <input type="text" id="persona-name" placeholder="Enter a name for your AI persona">
                            </div>
                            
                            <div class="form-group">
                                <label for="persona-role">Primary Role</label>
                                <select id="persona-role">
                                    <option value="" disabled selected>Select a primary role</option>
                                    <option value="assistant">Personal Assistant</option>
                                    <option value="researcher">Research Specialist</option>
                                    <option value="creative">Creative Collaborator</option>
                                    <option value="analyst">Data Analyst</option>
                                    <option value="coach">Learning Coach</option>
                                    <option value="custom">Custom Role</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="persona-description">Brief Description</label>
                            <textarea id="persona-description" placeholder="Describe your AI persona in a few sentences..."></textarea>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="action-button cancel-button" disabled>Back</button>
                        <button type="button" class="action-button save-button" id="next-step">Next Step</button>
                    </div>
                </div>
                
                <div class="form-step" id="step-2">
                    <div class="form-section">
                        <h2 class="section-title">
                            <span class="icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                            </span>
                            Personality & Skills
                        </h2>
                        
                        <div class="form-group">
                            <label for="persona-personality">Personality Traits</label>
                            <div class="trait-selectors">
                                <div class="trait-selector">
                                    <input type="checkbox" id="trait-analytical" class="trait-checkbox">
                                    <label for="trait-analytical" class="trait-label">Analytical</label>
                                </div>
                                <div class="trait-selector">
                                    <input type="checkbox" id="trait-creative" class="trait-checkbox">
                                    <label for="trait-creative" class="trait-label">Creative</label>
                                </div>
                                <div class="trait-selector">
                                    <input type="checkbox" id="trait-empathetic" class="trait-checkbox">
                                    <label for="trait-empathetic" class="trait-label">Empathetic</label>
                                </div>
                                <div class="trait-selector">
                                    <input type="checkbox" id="trait-precise" class="trait-checkbox">
                                    <label for="trait-precise" class="trait-label">Precise</label>
                                </div>
                                <div class="trait-selector">
                                    <input type="checkbox" id="trait-proactive" class="trait-checkbox">
                                    <label for="trait-proactive" class="trait-label">Proactive</label>
                                </div>
                                <div class="trait-selector">
                                    <input type="checkbox" id="trait-humorous" class="trait-checkbox">
                                    <label for="trait-humorous" class="trait-label">Humorous</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="persona-skills">Key Skills</label>
                            <div class="skill-selectors">
                                <div class="skill-selector">
                                    <input type="checkbox" id="skill-research" class="skill-checkbox">
                                    <label for="skill-research" class="skill-label">Research</label>
                                </div>
                                <div class="skill-selector">
                                    <input type="checkbox" id="skill-writing" class="skill-checkbox">
                                    <label for="skill-writing" class="skill-label">Writing</label>
                                </div>
                                <div class="skill-selector">
                                    <input type="checkbox" id="skill-analysis" class="skill-checkbox">
                                    <label for="skill-analysis" class="skill-label">Data Analysis</label>
                                </div>
                                <div class="skill-selector">
                                    <input type="checkbox" id="skill-planning" class="skill-checkbox">
                                    <label for="skill-planning" class="skill-label">Planning</label>
                                </div>
                                <div class="skill-selector">
                                    <input type="checkbox" id="skill-coding" class="skill-checkbox">
                                    <label for="skill-coding" class="skill-label">Coding</label>
                                </div>
                                <div class="skill-selector">
                                    <input type="checkbox" id="skill-teaching" class="skill-checkbox">
                                    <label for="skill-teaching" class="skill-label">Teaching</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="persona-communication">Communication Style</label>
                                <select id="persona-communication">
                                    <option value="" disabled selected>Select a communication style</option>
                                    <option value="formal">Formal & Professional</option>
                                    <option value="casual">Casual & Friendly</option>
                                    <option value="direct">Direct & Concise</option>
                                    <option value="educational">Educational & Detailed</option>
                                    <option value="motivational">Motivational & Encouraging</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="persona-specialization">Specialization Area (Optional)</label>
                                <input type="text" id="persona-specialization" placeholder="Enter a specific area of expertise">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="action-button cancel-button" id="back-step">Back</button>
                        <button type="button" class="action-button save-button" id="create-persona">Create Persona</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="success-modal" id="success-modal">
        <div class="modal-content">
            <div class="modal-icon">✓</div>
            <h2 class="modal-title">Persona Created Successfully!</h2>
            <p class="modal-message">Your AI persona has been created and is ready to assist you. You can now return to the main menu to start interacting with your new AI assistant.</p>
            <button class="modal-button" id="modal-button">Return to Main Menu</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize theme switcher
            initThemeSwitcher();
            
            // Create background effects
            createNeuralNetwork();
            createParticles();
            createWaves();
            
            // Initialize form steps
            initFormSteps();
        });
        
        // Theme switcher functionality
        function initThemeSwitcher() {
            const savedTheme = localStorage.getItem('pdtAiTheme') || 'jedi';
            setTheme(savedTheme);
            
            const themeSwitcher = document.querySelector('.theme-switcher');
            const themeButton = document.querySelector('.theme-switcher-button');
            const themeOptions = document.querySelectorAll('.theme-option');
            
            // Toggle dropdown
            themeButton.addEventListener('click', function() {
                themeSwitcher.classList.toggle('active');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!themeSwitcher.contains(event.target)) {
                    themeSwitcher.classList.remove('active');
                }
            });
            
            // Theme selection
            themeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    setTheme(theme);
                    themeSwitcher.classList.remove('active');
                });
            });
        }
        
        function setTheme(theme) {
            // Create transition overlay
            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.backgroundColor = theme === 'kotor' ? '#00BFFF' : 
                                           theme === 'jedi' ? '#00D4FF' : '#0078D4';
            overlay.style.zIndex = '9999';
            overlay.style.transformOrigin = 'left';
            overlay.style.transform = 'scaleX(0)';
            overlay.style.opacity = '0';
            overlay.style.pointerEvents = 'none';
            document.body.appendChild(overlay);
            
            // Animate the overlay
            overlay.animate([
                { transform: 'scaleX(0)', opacity: 0.3 },
                { transform: 'scaleX(1)', opacity: 0.3 },
                { transform: 'scaleX(1)', opacity: 0 }
            ], {
                duration: 500,
                easing: 'ease-in-out'
            }).onfinish = function() {
                overlay.remove();
            };
            
            // Remove all theme classes
            document.body.classList.remove('kotor-theme', 'jedi-theme', 'professional-theme');
            
            // Add selected theme class
            document.body.classList.add(`${theme}-theme`);
            
            // Update current theme text
            document.querySelector('.current-theme').textContent = 
                theme === 'kotor' ? 'KOTOR' : 
                theme === 'jedi' ? 'Jedi: Survivor' : 
                'Professional';
            
            // Save to localStorage
            localStorage.setItem('pdtAiTheme', theme);
            
            // Recreate background effects with theme-specific styling
            createParticles();
            updateNeuralNetworkColors(theme);
            updateWaveColors(theme);
        }
        
        // Create neural network nodes and connections
        function createNeuralNetwork() {
            const nodesContainer = document.getElementById('neural-nodes');
            nodesContainer.innerHTML = '';
            const nodeCount = 13; // Reduced count as requested
            const nodes = [];
            
            // Create nodes
            for (let i = 0; i < nodeCount; i++) {
                const node = document.createElement('div');
                node.className = 'neural-node';
                
                // Random position
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                node.style.left = `${x}%`;
                node.style.top = `${y}%`;
                
                nodes.push({
                    element: node,
                    x: x,
                    y: y
                });
                
                nodesContainer.appendChild(node);
            }
            
            // Create connections between nodes
            for (let i = 0; i < nodeCount; i++) {
                const sourceNode = nodes[i];
                
                // Connect to 1-2 other nodes (reduced from 2-4)
                const connectionCount = Math.floor(Math.random() * 2) + 1;
                
                for (let j = 0; j < connectionCount; j++) {
                    // Select a random target node
                    const targetIndex = Math.floor(Math.random() * nodeCount);
                    if (targetIndex !== i) {
                        const targetNode = nodes[targetIndex];
                        
                        const connection = document.createElement('div');
                        connection.className = 'neural-connection';
                        
                        // Position at source node
                        connection.style.left = `${sourceNode.x}%`;
                        connection.style.top = `${sourceNode.y}%`;
                        
                        // Calculate length and angle
                        const dx = targetNode.x - sourceNode.x;
                        const dy = targetNode.y - sourceNode.y;
                        const length = Math.sqrt(dx * dx + dy * dy);
                        const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                        
                        // Set width (length) and rotation
                        connection.style.width = `${length}%`;
                        connection.style.transform = `rotate(${angle}deg)`;
                        
                        nodesContainer.appendChild(connection);
                    }
                }
            }
            
            // Update colors based on current theme
            const currentTheme = localStorage.getItem('pdtAiTheme') || 'jedi';
            updateNeuralNetworkColors(currentTheme);
        }
        
        // Update neural network colors based on theme
        function updateNeuralNetworkColors(theme) {
            const nodes = document.querySelectorAll('.neural-node');
            const connections = document.querySelectorAll('.neural-connection');
            
            let nodeColor, connectionColor, nodeShadow;
            
            if (theme === 'kotor') {
                nodeColor = 'rgba(var(--kotor-accent-rgb, 0, 191, 255), 0.5)';
                connectionColor = 'rgba(var(--kotor-accent-rgb, 0, 191, 255), 0.2)';
                nodeShadow = '0 0 4px rgba(var(--kotor-accent-rgb, 0, 191, 255), 0.3)';
            } else if (theme === 'jedi') {
                nodeColor = 'rgba(var(--jedi-accent-rgb, 0, 212, 255), 0.5)';
                connectionColor = 'rgba(var(--jedi-accent-rgb, 0, 212, 255), 0.2)';
                nodeShadow = '0 0 4px rgba(var(--jedi-accent-rgb, 0, 212, 255), 0.3)';
            } else {
                nodeColor = 'rgba(var(--prof-accent-rgb, 0, 120, 212), 0.5)';
                connectionColor = 'rgba(var(--prof-accent-rgb, 0, 120, 212), 0.2)';
                nodeShadow = '0 0 4px rgba(var(--prof-accent-rgb, 0, 120, 212), 0.3)';
            }
            
            nodes.forEach(node => {
                node.style.backgroundColor = nodeColor;
                node.style.boxShadow = nodeShadow;
            });
            
            connections.forEach(connection => {
                connection.style.backgroundColor = connectionColor;
            });
        }
        
        // Create particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            particlesContainer.innerHTML = '';
            
            // Determine particle count and style based on theme
            let particleCount, particleColor, particleOpacity, particleSize, particleGlow;
            
            // Get current theme
            const currentTheme = localStorage.getItem('pdtAiTheme') || 'jedi';
            
            if (currentTheme === 'kotor') {
                particleCount = 10; // Reduced for performance
                particleColor = '#00BFFF';
                particleOpacity = 0.45;
                particleSize = 4;
                particleGlow = '0 0 8px #00BFFF';
            } else if (currentTheme === 'jedi') {
                particleCount = 10; // Reduced for performance
                particleColor = '#00D4FF';
                particleOpacity = 0.35;
                particleSize = 3.5;
                particleGlow = '0 0 7px #00D4FF';
            } else if (currentTheme === 'professional') {
                particleCount = 8; // Reduced for performance
                particleColor = '#0078D4';
                particleOpacity = 0.28;
                particleSize = 2.5;
                particleGlow = '0 0 5px #0078D4';
            }
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Apply theme-specific styling
                particle.style.backgroundColor = particleColor;
                particle.style.opacity = particleOpacity;
                particle.style.width = `${particleSize}px`;
                particle.style.height = `${particleSize}px`;
                particle.style.boxShadow = particleGlow;
                
                // Random position
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                particle.style.left = `${x}%`;
                particle.style.top = `${y}%`;
                
                // Random drift direction and speed
                const xDrift = (Math.random() - 0.5) * 400;
                const yDrift = (Math.random() - 0.5) * 400;
                particle.style.setProperty('--x-drift', `${xDrift}px`);
                particle.style.setProperty('--y-drift', `${yDrift}px`);
                
                // Random animation duration
                const duration = 2 + Math.random() * 5;
                particle.style.setProperty('--drift-duration', `${duration}s`);
                
                // Random delay
                const delay = Math.random() * 5;
                particle.style.animationDelay = `${delay}s`;
                
                particlesContainer.appendChild(particle);
            }
        }
        
        // Create waves
        function createWaves() {
            const wavesContainer = document.getElementById('waves-container');
            wavesContainer.innerHTML = '';
            
            // Create 3 wave layers
            for (let i = 0; i < 3; i++) {
                const wave = document.createElement('div');
                wave.className = `wave wave-${i+1}`;
                wavesContainer.appendChild(wave);
            }
            
            // Update wave colors based on theme
            const currentTheme = localStorage.getItem('pdtAiTheme') || 'jedi';
            updateWaveColors(currentTheme);
        }
        
        // Update wave colors based on theme
        function updateWaveColors(theme) {
            const waves = document.querySelectorAll('.wave');
            let waveColor;
            
            if (theme === 'kotor') {
                waveColor = 'rgba(var(--kotor-accent-rgb, 0, 191, 255), ';
            } else if (theme === 'jedi') {
                waveColor = 'rgba(var(--jedi-accent-rgb, 0, 212, 255), ';
            } else {
                waveColor = 'rgba(var(--prof-accent-rgb, 0, 120, 212), ';
            }
            
            waves.forEach((wave, index) => {
                const opacity = 0.09 - (index * 0.015);
                wave.style.background = `${waveColor}${opacity})`;
            });
        }
        
        // Form steps functionality
        function initFormSteps() {
            const nextButton = document.getElementById('next-step');
            const backButton = document.getElementById('back-step');
            const createButton = document.getElementById('create-persona');
            const step1 = document.getElementById('step-1');
            const step2 = document.getElementById('step-2');
            const progressFill = document.querySelector('.progress-fill');
            const progressSteps = document.querySelectorAll('.progress-step');
            
            // Next button click
            nextButton.addEventListener('click', function() {
                step1.classList.remove('active');
                step2.classList.add('active');
                progressFill.style.width = '100%';
                progressSteps[0].classList.remove('active');
                progressSteps[1].classList.add('active');
            });
            
            // Back button click
            backButton.addEventListener('click', function() {
                step2.classList.remove('active');
                step1.classList.add('active');
                progressFill.style.width = '50%';
                progressSteps[1].classList.remove('active');
                progressSteps[0].classList.add('active');
            });
            
            // Create button click
            createButton.addEventListener('click', function() {
                // Simulate form submission
                this.textContent = 'Creating...';
                this.disabled = true;
                
                setTimeout(() => {
                    window.location.href = 'main-menu.html';
                }, 1500);
            });
            
            // Initialize trait and skill selectors
            initSelectors();
        }
        
        // Initialize trait and skill selectors
        function initSelectors() {
            const traitCheckboxes = document.querySelectorAll('.trait-checkbox');
            const skillCheckboxes = document.querySelectorAll('.skill-checkbox');
            
            // Add click event to trait checkboxes
            traitCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const label = document.querySelector(`label[for="${this.id}"]`);
                    if (this.checked) {
                        label.classList.add('selected');
                    } else {
                        label.classList.remove('selected');
                    }
                });
            });
            
            // Add click event to skill checkboxes
            skillCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const label = document.querySelector(`label[for="${this.id}"]`);
                    if (this.checked) {
                        label.classList.add('selected');
                    } else {
                        label.classList.remove('selected');
                    }
                });
            });
        }
    </script>
</body>
</html> 